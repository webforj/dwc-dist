/*!
 * Built by BASIS
 * Copyright BASIS International Ltd.
 */
import{r as t,c as e,d as a,h as i,H as o,g as n}from"./p-00e3df8e.js";import{D as r}from"./p-d533ee6a.js";import{h as d}from"./p-3e9fe89f.js";function s(t){function e(t,e){return t<<e|t>>>32-e}function a(t,e){const a=2147483648&t,i=2147483648&e,o=1073741824&t,n=1073741824&e,r=(1073741823&t)+(1073741823&e);return o&n?2147483648^r^a^i:o|n?1073741824&r?3221225472^r^a^i:1073741824^r^a^i:r^a^i}function i(t,i,o,n,r,d,s){return t=a(t,a(a(function(t,e,a){return t&e|~t&a}(i,o,n),r),s)),a(e(t,d),i)}function o(t,i,o,n,r,d,s){return t=a(t,a(a(function(t,e,a){return t&a|e&~a}(i,o,n),r),s)),a(e(t,d),i)}function n(t,i,o,n,r,d,s){return t=a(t,a(a(function(t,e,a){return t^e^a}(i,o,n),r),s)),a(e(t,d),i)}function r(t,i,o,n,r,d,s){return t=a(t,a(a(function(t,e,a){return e^(t|~a)}(i,o,n),r),s)),a(e(t,d),i)}function d(t){let e,a,i="",o="";for(a=0;a<=3;a++)e=t>>>8*a&255,o="0"+e.toString(16),i+=o.substr(o.length-2,2);return i}let s,c,h,l,f,p,m,u,b,g=[];for(g=function(t){let e;const a=t.length,i=a+8,o=16*((i-i%64)/64+1),n=Array(o-1);let r=0,d=0;for(;d<a;)e=(d-d%4)/4,r=d%4*8,n[e]=n[e]|t.charCodeAt(d)<<r,d++;return e=(d-d%4)/4,r=d%4*8,n[e]=n[e]|128<<r,n[o-2]=a<<3,n[o-1]=a>>>29,n}(t=function(t){t=t.replace(/rn/g,"n");let e="";for(let a=0;a<t.length;a++){const i=t.charCodeAt(a);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}(t)),p=1732584193,m=4023233417,u=2562383102,b=271733878,s=0;s<g.length;s+=16)c=p,h=m,l=u,f=b,p=i(p,m,u,b,g[s+0],7,3614090360),b=i(b,p,m,u,g[s+1],12,3905402710),u=i(u,b,p,m,g[s+2],17,606105819),m=i(m,u,b,p,g[s+3],22,3250441966),p=i(p,m,u,b,g[s+4],7,4118548399),b=i(b,p,m,u,g[s+5],12,1200080426),u=i(u,b,p,m,g[s+6],17,2821735955),m=i(m,u,b,p,g[s+7],22,4249261313),p=i(p,m,u,b,g[s+8],7,1770035416),b=i(b,p,m,u,g[s+9],12,2336552879),u=i(u,b,p,m,g[s+10],17,4294925233),m=i(m,u,b,p,g[s+11],22,2304563134),p=i(p,m,u,b,g[s+12],7,1804603682),b=i(b,p,m,u,g[s+13],12,4254626195),u=i(u,b,p,m,g[s+14],17,2792965006),m=i(m,u,b,p,g[s+15],22,1236535329),p=o(p,m,u,b,g[s+1],5,4129170786),b=o(b,p,m,u,g[s+6],9,3225465664),u=o(u,b,p,m,g[s+11],14,643717713),m=o(m,u,b,p,g[s+0],20,3921069994),p=o(p,m,u,b,g[s+5],5,3593408605),b=o(b,p,m,u,g[s+10],9,38016083),u=o(u,b,p,m,g[s+15],14,3634488961),m=o(m,u,b,p,g[s+4],20,3889429448),p=o(p,m,u,b,g[s+9],5,568446438),b=o(b,p,m,u,g[s+14],9,3275163606),u=o(u,b,p,m,g[s+3],14,4107603335),m=o(m,u,b,p,g[s+8],20,1163531501),p=o(p,m,u,b,g[s+13],5,2850285829),b=o(b,p,m,u,g[s+2],9,4243563512),u=o(u,b,p,m,g[s+7],14,1735328473),m=o(m,u,b,p,g[s+12],20,2368359562),p=n(p,m,u,b,g[s+5],4,4294588738),b=n(b,p,m,u,g[s+8],11,2272392833),u=n(u,b,p,m,g[s+11],16,1839030562),m=n(m,u,b,p,g[s+14],23,4259657740),p=n(p,m,u,b,g[s+1],4,2763975236),b=n(b,p,m,u,g[s+4],11,1272893353),u=n(u,b,p,m,g[s+7],16,4139469664),m=n(m,u,b,p,g[s+10],23,3200236656),p=n(p,m,u,b,g[s+13],4,681279174),b=n(b,p,m,u,g[s+0],11,3936430074),u=n(u,b,p,m,g[s+3],16,3572445317),m=n(m,u,b,p,g[s+6],23,76029189),p=n(p,m,u,b,g[s+9],4,3654602809),b=n(b,p,m,u,g[s+12],11,3873151461),u=n(u,b,p,m,g[s+15],16,530742520),m=n(m,u,b,p,g[s+2],23,3299628645),p=r(p,m,u,b,g[s+0],6,4096336452),b=r(b,p,m,u,g[s+7],10,1126891415),u=r(u,b,p,m,g[s+14],15,2878612391),m=r(m,u,b,p,g[s+5],21,4237533241),p=r(p,m,u,b,g[s+12],6,1700485571),b=r(b,p,m,u,g[s+3],10,2399980690),u=r(u,b,p,m,g[s+10],15,4293915773),m=r(m,u,b,p,g[s+1],21,2240044497),p=r(p,m,u,b,g[s+8],6,1873313359),b=r(b,p,m,u,g[s+15],10,4264355552),u=r(u,b,p,m,g[s+6],15,2734768916),m=r(m,u,b,p,g[s+13],21,1309151649),p=r(p,m,u,b,g[s+4],6,4149444226),b=r(b,p,m,u,g[s+11],10,3174756917),u=r(u,b,p,m,g[s+2],15,718787259),m=r(m,u,b,p,g[s+9],21,3951481745),p=a(p,c),m=a(m,h),u=a(u,l),b=a(b,f);return(d(p)+d(m)+d(u)+d(b)).toLowerCase()}const c=class{constructor(a){t(this,a),this.submitEvent=e(this,"dwc-login-submit",7),this.cancelEvent=e(this,"dwc-login-cancel",7),this.autoClose=!0,this.autoSignin=!1,this.disabled=!1,this.emptyPassword=!1,this.error=!1,this.i18n={title:"Authentication",usernamePrompt:"Username",passwordPrompt:"Password",rememberMe:"Remember me",loginButton:"Sign in",cancelButton:"Cancel",error:{title:"Incorrect username or password",message:"Check that you have entered the correct username and password and try again."}},this.maxWidth="400px",this.maxHeight="",this.opened=!1,this.password=void 0,this.passwordMediation="optional",this.rememberme=!0,this.username=void 0}onOpenedChanged(t){t&&this.loadState()}connectedCallback(){this.handleSigninClicked=this.handleSigninClicked.bind(this),this.handleCancelClicked=this.handleCancelClicked.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleUsernameChanged=this.handleUsernameChanged.bind(this),this.handlePasswordChanged=this.handlePasswordChanged.bind(this),this.handleRemembermeChanged=this.handleRemembermeChanged.bind(this),this.handleDialogKeydown=this.handleDialogKeydown.bind(this),this.handleDialogOpened=this.handleDialogOpened.bind(this)}componentWillLoad(){this.loadState()}componentDidLoad(){null!=window.applyFocusVisiblePolyfill&&window.applyFocusVisiblePolyfill(this.el.shadowRoot);const t=[r.KEY,r.REQUEST];this.$usernameInput.highlightBehaviors=t,this.$passwordInput.highlightBehaviors=t}submit(){var t,e;if(this.disabled)return;const a=this.validateUsername(),i=this.validatePassword();a&&i?(this.saveState(),this.tryClosing(),this.submitEvent.emit({username:null===(t=this.$usernameInput)||void 0===t?void 0:t.value,password:null===(e=this.$passwordInput)||void 0===e?void 0:e.value,rememberme:this.rememberme})):a?i||this.$passwordInput.setFocus():this.$usernameInput.setFocus()}handleFormSubmit(t){return t.preventDefault(),this.submit(),!1}handleDialogOpened(){a((()=>{this.$usernameInput.setFocus()}))}handleSigninClicked(){this.$submitButton.click()}handleCancelClicked(){this.tryClosing(),this.cancelEvent.emit()}tryClosing(){this.opened=!this.autoClose&&this.opened,this.opened&&(this.disabled=!0)}handleUsernameChanged(){this.validateUsername()}handlePasswordChanged(){this.validatePassword()}handleRemembermeChanged(t){this.rememberme=t.target.checked}handleDialogKeydown(t){if("Enter"===t.key){const e=t.target;if("dwc-button"===e.tagName.toLowerCase()&&e.label===this.i18n.cancelButton)return;this.submit()}}validateUsername(){var t,e;return(null===(e=null===(t=this.$usernameInput)||void 0===t?void 0:t.value)||void 0===e?void 0:e.length)?(this.$usernameInput.invalid=!1,!0):(this.$usernameInput.invalid=!0,!1)}validatePassword(){var t,e;let a=(null===(e=null===(t=this.$passwordInput)||void 0===t?void 0:t.value)||void 0===e?void 0:e.length)>0;return a||(a=this.emptyPassword,a)?(this.$passwordInput.invalid=!1,!0):(this.$passwordInput.invalid=!0,!1)}saveState(){var t,e,a,i,o,n,r;if(window.PasswordCredential&&(null===(e=null===(t=this.$passwordInput)||void 0===t?void 0:t.value)||void 0===e?void 0:e.length)){const t=new window.PasswordCredential({id:null===(a=this.$usernameInput)||void 0===a?void 0:a.value,password:null===(i=this.$passwordInput)||void 0===i?void 0:i.value,name:null===(o=this.$usernameInput)||void 0===o?void 0:o.value,iconURL:`https://www.gravatar.com/avatar/${s(null===(n=this.$usernameInput)||void 0===n?void 0:n.value)}?d=robohash`});navigator.credentials.store(t)}const d=this.rememberme?"on":"off";localStorage.setItem("dwc-login-rememberme",d),"on"===d?localStorage.setItem("dwc-login-username",null===(r=this.$usernameInput)||void 0===r?void 0:r.value):localStorage.removeItem("dwc-login-username")}loadState(){let t=Promise.resolve();window.PasswordCredential&&(t=navigator.credentials.get({password:!0,mediation:this.passwordMediation}).then((t=>(t&&(this.$usernameInput.value=t.name,this.$passwordInput.value=t.password,this.autoSignin&&this.submit()),t)))),t.then((t=>{const e=localStorage.getItem("dwc-login-rememberme");if(this.rememberme="on"===e||"off"!==e&&this.rememberme,!t&&"on"===e){const t=localStorage.getItem("dwc-login-username");t&&(this.username=t)}}))}render(){var t,e,a,n;return i(o,{key:"d4693e7d49e4b7dc5bb57952b56c7ed9eef62a37","data-no-header":!this.i18n.title,"data-no-footer":!this.i18n.rememberMe&&!this.i18n.loginButton&&!this.i18n.cancelButton,"data-no-cancel-button":!this.i18n.cancelButton,class:d({BBjUserAuthentication:!0})},i("dwc-dialog",{key:"dc127186ec0b28f84cfc551e4d20676e71306267",part:"dialog",cancelOnEscKey:!1,cancelOnOutsideClick:!1,opened:this.opened,maxWidth:this.maxWidth,maxHeight:this.maxHeight,onKeyDown:this.handleDialogKeydown,"onDwc-dialog-opened":this.handleDialogOpened,moveable:!1,theme:"primary",exportparts:"modal: dialog-modal, dialog: dialog-content",autofocus:!0},i("header",{key:"786e73059333340e46ae8990a54c08b7d0e0fe50",slot:"header",part:"header"},i("slot",{key:"6b3c3959ebf7b2265cda5fada4f511a459249bc7",name:"before-header"}),this.i18n.title,i("slot",{key:"71ede2029b2a898f8058ef3af7f6a4668083b036",name:"after-header"})),i("section",{key:"46092f0ef46e8511df20e2e6660de5ef65f699ad",slot:"content",part:"content"},i("slot",{key:"d71c2f7953ec2d756e981eecd147576f99fd37b3",name:"before-content"}),i("form",{key:"1fe512806db316d9c9fb30d1d5cb273ee33a5e9d",part:"form",onSubmit:this.handleFormSubmit,autocomplete:"on",method:"post"},i("dwc-alert",{key:"344a1cb7107e2d35336a96cf8bbdaa7bedd2aaca",part:"error",opened:this.error,theme:"danger",icon:"dwc:info"},i("div",{key:"be806b113dc6fff0d58d13a8ab63e38fdab59690",part:"error-content"},i("dwc-icon",{key:"88dc670cf760969d8e7224e4e6dc30294535dfd7",part:"error-icon",pool:"dwc",name:"info","aria-hidden":"true"}),i("div",{key:"58b2a20f0ae46a687099bef3d293e2472e1843c2",part:"error-message"},i("strong",{key:"91aa676957da2df8377baa5cd26ec2d5cda92076",part:"error-title",innerHTML:null===(e=null===(t=this.i18n)||void 0===t?void 0:t.error)||void 0===e?void 0:e.title}),i("div",{key:"ab5e8d4082e9941cd1b4bab403abf49778c98ee2",part:"error-description",innerHTML:null===(n=null===(a=this.i18n)||void 0===a?void 0:a.error)||void 0===n?void 0:n.message})))),i("slot",{key:"23eeccaf88b7e72d899c8105dfd95d957b8359a1",name:"before-form"}),i("dwc-field",{key:"e6817cd990fba58327be99e997e2a43400cf9705",ref:t=>this.$usernameInput=t,part:"username-input",id:"username",name:"username",autocomplete:"username",value:this.username,label:this.i18n.usernamePrompt,required:!0,autoValidate:!1,onInput:this.handleUsernameChanged}),i("dwc-field",{key:"f81bd51d6a85fbbb3350b4609dd6bdd7aafe52a9",ref:t=>this.$passwordInput=t,part:"password-input",id:"password",type:"password",name:"password",autocomplete:"current-password",value:this.password,label:this.i18n.passwordPrompt,required:!this.emptyPassword,autoValidate:!1,onInput:this.handlePasswordChanged}),i("slot",{key:"b4d62c33d1342c6c5dec2ab260859512fffe4c0a",name:"after-form"}),i("button",{key:"c11ac93ad2305931e9ce6848fd4b17f928dd48aa",ref:t=>this.$submitButton=t,hidden:!0})),i("footer",{key:"404d8417c0648a19f95ae315d38fd0f94d184194",part:"footer"},i("slot",{key:"69f605587b99784294f372d409b106acf2da454b",name:"before-footer"}),i("dwc-checkbox",{key:"e12e2d941e4b81a005116f6237c978f8c7ecc13d",part:"rememberme-input",checked:this.rememberme,label:this.i18n.rememberMe,hidden:!this.i18n.rememberMe,"onDwc-changed":this.handleRemembermeChanged}),i("div",{key:"722e2bf4c2d81ebfc6854a1b2de7cb6c6e88ecac",part:"buttons"},i("dwc-button",{key:"ed19cd9aa9272160123d241b76cbb8ec35f816f7",part:"submit-button",theme:"primary",label:this.i18n.loginButton,hidden:!this.i18n.loginButton,disabled:this.disabled,onClick:this.handleSigninClicked}),i("dwc-button",{key:"4024a8bcfcb87edf55b02bbcbc34e8e511d1876e",part:"cancel-button",label:this.i18n.cancelButton,hidden:!this.i18n.cancelButton,disabled:this.disabled,onClick:this.handleCancelClicked})),i("slot",{key:"9fe3422840a4b28ac9935c99e2b3f84a419755c1",name:"after-footer"})),i("slot",{key:"66b595c4eb1259868ec662a9af09b90a24df218c",name:"after-content"}))))}get el(){return n(this)}static get watchers(){return{opened:["onOpenedChanged"]}}};c.style="@media (prefers-reduced-motion: reduce){*,::before,::after{animation-delay:-1ms !important;animation-duration:1ms !important;animation-iteration-count:1 !important;background-attachment:initial !important;scroll-behavior:auto !important;transition-delay:0s !important;transition-duration:0s !important}}:host{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:relative;-webkit-tap-highlight-color:transparent;text-size-adjust:100%}:host *,:host *::before,:host *::after{box-sizing:inherit}:host{--dwc-dialog-modal-background:var(--dwc-surface-1);--dwc-dialog-padding:0;display:block}[hidden]{display:none !important}[part=dialog]{--dwc-dialog-scroll-bottom-shadow:none}[part=header],[part=form],[part=footer]{padding:var(--dwc-space-m)}[part=header]{font-weight:var(--dwc-font-weight-semibold);text-align:center}:host([data-no-header]) [part=header],:host([data-no-footer]) [part=footer]{display:none}:host([data-no-footer]) [part=content]{padding-bottom:var(--dwc-space-m)}[part=content]{display:flex;flex-direction:column;gap:var(--dwc-space-m)}[part=form]{display:flex;flex-direction:column;gap:var(--dwc-space-m)}[part=username-input],[part=password-input]{display:block;width:100%}[part=footer]{align-items:center;background-color:var(--dwc-surface-1);display:flex;flex-wrap:wrap;gap:var(--dwc-space-m);justify-content:center;width:100%}[part=buttons]{align-items:center;display:flex;flex-wrap:wrap}[part=rememberme-input]{flex:1;margin-right:var(--dwc-space-l)}[part=signin-button],[part=cancel-button]{margin:0 var(--dwc-space-xs)}:host([data-no-cancel-button]) [part=signin-button]{margin-right:0}[part=error-content]{display:flex;gap:var(--dwc-space-s)}[part=error-icon]{color:var(--dwc-color-danger);min-width:var(--dwc-size-xs)}[part=error-title]{font-weight:var(--dwc-font-weight-bold)}[part=error-description]{margin:var(--dwc-space) 0}@media screen and (max-width: 450px){[part=content]{padding-bottom:0}[part=footer]{align-items:center;background-color:unset;flex-direction:column;justify-content:center;padding-top:0}[part=buttons]{align-items:flex-end}[part=rememberme-input]{align-self:flex-start;margin-bottom:var(--dwc-space-m)}}";export{c as dwc_login}