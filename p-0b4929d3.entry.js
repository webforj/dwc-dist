/*!
 * Built by BASIS
 * Copyright BASIS International Ltd.
 */
import{r as t,h as i,H as e,g as a}from"./p-00e3df8e.js";import{l as o}from"./p-f5397639.js";import{D as s}from"./p-a2384989.js";import{d as r}from"./p-89a330bf.js";import{h as n}from"./p-3e9fe89f.js";import"./p-21e654a9.js";import"./p-58156e74.js";import"./p-5119ef20.js";import"./p-ece60743.js";const h=class{constructor(i){t(this,i),this.ticking=!1,this.canScrollLeft=!1,this.canScrollRight=!1,this.disabled=void 0,this.distance=4,this.hasFocus=!1,this.hideChevronIcon=!0,this.hideHotkeyLabel=!0,this.label="",this.placement="bottom",this.scrollValue=150,this.skidding=0}onDisabledChanged(t){this.controller&&this.controller.updateItemsProperties({disabled:t})}onDistanceChanged(t){this.controller&&this.controller.updateItemsProperties({distance:t})}onHideChevronIconChanged(t){this.controller&&this.controller.updateItemsProperties({hideChevronIcon:t})}onHideAccelerator(t){this.controller&&this.controller.updateItemsProperties({hideHotkeyLabel:t})}onPlacementChanged(t){this.controller&&this.controller.updateItemsProperties({placement:t})}onSkiddingChanged(t){this.controller&&this.controller.updateItemsProperties({skidding:t})}connectedCallback(){this.handleSlotChange=this.handleSlotChange.bind(this),this.handleScroll=this.handleScroll.bind(this),this.handleScrollLeft=this.handleScrollLeft.bind(this),this.handleScrollRight=this.handleScrollRight.bind(this)}componentDidLoad(){this.controller=new s(this.el),this.handleSlotChange(),this.resizeObserver=new ResizeObserver(this.handleScroll),this.resizeObserver.observe(this.el)}async handleDocumentClick(t){const i=t.target;if(this.el.contains(i))return;if("dwc-menu"===i.nodeName.toLocaleLowerCase())return;if(!this.controller)return;const e=this.controller.getMenuItems();for(const t of e){const e=t;if(await e.hasItem(i))return}this.close()}handleWindowResize(){this.updateOverflow()}handleItemFocused(){this.hasFocus=!0}handleItemBlurred(){this.hasFocus=!1}handleItemOpened(t){if(this.disabled||t.defaultPrevented)return;const i=t.target;"dwc-menuitem"===i.nodeName.toLowerCase()&&this.controller.closeDropdownsBut(i)}handleItemEnter(t){if(this.disabled||!this.hasFocus||t.defaultPrevented)return;const i=t.target;"dwc-menuitem"===i.nodeName.toLowerCase()&&(this.controller.closeDropdownsBut(i),i.open(),this.controller.focusItem(i))}async handleItemClicked(t){if(this.disabled||t.defaultPrevented)return;const i=t.detail.item,e=t.detail.originalEvent;if("keydown"===e.type&&"Enter"===e.key)if(this.el.contains(i))await i.setFocus();else{const t=i=>{const e=i.closest("dwc-menu");if(e){const i=e.forDwcMenuItem;return t(i)||i}},e=t(i);e&&await e.setFocus()}t.defaultPrevented||this.el.contains(i)||i.hasAttribute("dropdown")||this.close()}async handleKeydown(t){if(this.disabled||t.defaultPrevented)return;const i=document.activeElement;switch(t.key){case"ArrowRight":i&&this.el.contains(i)&&(await i.close(),await this.controller.focusNextItem(i)&&t.preventDefault());break;case"ArrowLeft":i&&this.el.contains(i)&&(await i.close(),await this.controller.focusPreviousItem(i)&&t.preventDefault());break;case"ArrowDown":i.dropdown&&(await i.open(),await i.focusMenu());break;case"Escape":{if(!this.el.contains(i))break;i.dropdown&&(await i.close(),await this.controller.focusItem(i));const t=i.closest("dwc-menu");if(t){const i=t.forDwcMenuItem;i&&(await i.close(),await i.setFocus())}break}case"Enter":i.dropdown&&this.el.contains(i)&&(t.preventDefault(),i.opened?await i.focusMenu():await this.controller.focusItem(i));break;case"Home":case"End":if(i&&this.el.contains(i)){let e="Home"===t.key?this.el.firstElementChild:this.el.lastElementChild;(null==e?void 0:e.hasAttribute("disabled"))&&(e="Home"===t.key?this.controller.getNextItem(e):this.controller.getPreviousItem(e)),e&&(t.preventDefault(),await i.close(),await this.controller.focusItem(e))}}}async setFocus(){this.controller&&await this.controller.setFocus()}async removeFocus(){this.controller&&await this.controller.removeFocus()}async close(){this.controller&&this.controller.close()}updateOverflow(){const t=r(this.$itemsEl,this.$itemsWrapperEl,"horizontal");this.canScrollLeft=["both-horizontal","left"].includes(t),this.canScrollRight=["both-horizontal","right"].includes(t),this.$itemsWrapperEl.setAttribute("data-overflowing",t)}handleScroll(){this.ticking||requestAnimationFrame((()=>{this.updateOverflow(),this.ticking=!1})),this.ticking=!0}handleScrollLeft(){let t=this.$itemsWrapperEl.scrollLeft;t-=this.scrollValue,this.$itemsWrapperEl.scrollTo({left:t,behavior:"smooth"}),this.handleScroll()}handleScrollRight(){let t=this.$itemsWrapperEl.scrollLeft;t+=this.scrollValue,this.$itemsWrapperEl.scrollTo({left:t,behavior:"smooth"}),this.handleScroll()}handleSlotChange(){this.controller&&(this.handleScroll(),this.controller.resetTabTraversable(),this.controller.markFirstFocusableItem(),this.controller.updateItemsProperties({disabled:this.disabled,placement:this.placement,hideChevronIcon:this.hideChevronIcon,distance:this.distance,skidding:this.skidding,hideHotkeyLabel:this.hideHotkeyLabel,forDwcMenuBar:this.el}))}render(){return i(e,{key:"42ffa4e6560f58d7f1582c48d16129cda51c659b",class:n({BBjControl:!0,BBjMenuBar:!0,"bbj-disabled":this.disabled})},i("div",{key:"d32ba30bd19282d69979517a737744bfdd9eda3d",part:"control",class:{control:!0}},i("div",{key:"3cf12e82c19b70b7cb53672eee61c9fd87037691",role:"menubar",part:"items-wrapper",ref:t=>this.$itemsWrapperEl=t,"aria-label":this.label,onScroll:this.handleScroll},i("div",{key:"f6ea116eac61e02d227ff5ad7f2ee042c39fb08c",part:"items",ref:t=>this.$itemsEl=t},i("slot",{key:"1b614bd75ff662df3ade4326e1d369a1fc2fd119",onSlotchange:this.handleSlotChange}))),i("dwc-icon-button",{key:"23a1489dbe37afe8fd79879aa60d3692ed2de8e5",part:"advancer advancer-left",pool:"dwc",name:"chevron-left",label:"Scroll left",tabTraversable:this.canScrollLeft?0:-1,onClick:this.handleScrollLeft}),i("dwc-icon-button",{key:"f4424f6b94d4bf7d899911ae290535df7feb390d",part:"advancer advancer-right",pool:"dwc",name:"chevron-right",label:"Scroll right",tabTraversable:this.canScrollRight?0:-1,onClick:this.handleScrollRight})))}get el(){return a(this)}static get watchers(){return{disabled:["onDisabledChanged"],distance:["onDistanceChanged"],hideChevronIcon:["onHideChevronIconChanged"],hideHotkeyLabel:["onHideAccelerator"],placement:["onPlacementChanged"],skidding:["onSkiddingChanged"]}}};(function(t,i,e,a){var o,s=arguments.length,r=s<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,a);else for(var n=t.length-1;n>=0;n--)(o=t[n])&&(r=(s<3?o(r):s>3?o(i,e,r):o(i,e))||r);s>3&&r&&Object.defineProperty(i,e,r)})([o.debounce(25)],h.prototype,"updateOverflow",null),h.style="@media (prefers-reduced-motion: reduce){*,::before,::after{animation-delay:-1ms !important;animation-duration:1ms !important;animation-iteration-count:1 !important;background-attachment:initial !important;scroll-behavior:auto !important;transition-delay:0s !important;transition-duration:0s !important}}:host{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:relative;-webkit-tap-highlight-color:transparent;text-size-adjust:100%}:host *,:host *::before,:host *::after{box-sizing:inherit}:host{--dwc-menubar-advancer-color:var(--dwc-color-primary-text);background-color:var(--dwc-surface-3);display:block;height:auto;width:100%;z-index:1}[part=control]{height:100%;position:relative;width:100%}[part=items-wrapper]{display:flex;height:100%;-webkit-overflow-scrolling:touch;overflow-x:auto;overflow-y:hidden;position:relative;scrollbar-width:none;scrollbar-width:none;white-space:nowrap}[part=items-wrapper]::-webkit-scrollbar{display:none}[part=items]{align-items:stretch;display:inline-flex;height:100%;justify-content:center;margin:0;padding:0}[part~=advancer]{bottom:0;color:var(--dwc-menubar-advancer-color);opacity:0;pointer-events:none;position:absolute;top:0;transition:opacity var(--dwc-transition)}[part~=advancer-left]{background:var(--dwc-menubar-left-advancer-background, linear-gradient(to right, var(--dwc-advancer-gradient)));left:0}[data-overflowing=both-horizontal]~[part~=advancer-left],[data-overflowing=left]~[part~=advancer-left]{cursor:var(--dwc-cursor-click);opacity:1;pointer-events:initial}[part~=advancer-right]{background:var(--dwc-menubar-right-advancer-background, linear-gradient(to left, var(--dwc-advancer-gradient)));right:0}[data-overflowing=both-horizontal]~[part~=advancer-right],[data-overflowing=right]~[part~=advancer-right]{cursor:var(--dwc-cursor-click);opacity:1;pointer-events:initial}";export{h as dwc_menubar}