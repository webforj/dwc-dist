/*!
 * Built by BASIS
 * Copyright BASIS International Ltd.
 */
import{r as t,c as e,d as i,h as a,H as o,g as n}from"./p-00e3df8e.js";import{D as r}from"./p-d533ee6a.js";import{h as d}from"./p-3e9fe89f.js";function s(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){const i=2147483648&t,a=2147483648&e,o=1073741824&t,n=1073741824&e,r=(1073741823&t)+(1073741823&e);return o&n?2147483648^r^i^a:o|n?1073741824&r?3221225472^r^i^a:1073741824^r^i^a:r^i^a}function a(t,a,o,n,r,d,s){return t=i(t,i(i(function(t,e,i){return t&e|~t&i}(a,o,n),r),s)),i(e(t,d),a)}function o(t,a,o,n,r,d,s){return t=i(t,i(i(function(t,e,i){return t&i|e&~i}(a,o,n),r),s)),i(e(t,d),a)}function n(t,a,o,n,r,d,s){return t=i(t,i(i(function(t,e,i){return t^e^i}(a,o,n),r),s)),i(e(t,d),a)}function r(t,a,o,n,r,d,s){return t=i(t,i(i(function(t,e,i){return e^(t|~i)}(a,o,n),r),s)),i(e(t,d),a)}function d(t){let e,i,a="",o="";for(i=0;i<=3;i++)e=t>>>8*i&255,o="0"+e.toString(16),a+=o.substr(o.length-2,2);return a}let s,c,h,l,f,p,m,b,u,g=[];for(g=function(t){let e;const i=t.length,a=i+8,o=16*((a-a%64)/64+1),n=Array(o-1);let r=0,d=0;for(;d<i;)e=(d-d%4)/4,r=d%4*8,n[e]=n[e]|t.charCodeAt(d)<<r,d++;return e=(d-d%4)/4,r=d%4*8,n[e]=n[e]|128<<r,n[o-2]=i<<3,n[o-1]=i>>>29,n}(t=function(t){t=t.replace(/rn/g,"n");let e="";for(let i=0;i<t.length;i++){const a=t.charCodeAt(i);a<128?e+=String.fromCharCode(a):a>127&&a<2048?(e+=String.fromCharCode(a>>6|192),e+=String.fromCharCode(63&a|128)):(e+=String.fromCharCode(a>>12|224),e+=String.fromCharCode(a>>6&63|128),e+=String.fromCharCode(63&a|128))}return e}(t)),p=1732584193,m=4023233417,b=2562383102,u=271733878,s=0;s<g.length;s+=16)c=p,h=m,l=b,f=u,p=a(p,m,b,u,g[s+0],7,3614090360),u=a(u,p,m,b,g[s+1],12,3905402710),b=a(b,u,p,m,g[s+2],17,606105819),m=a(m,b,u,p,g[s+3],22,3250441966),p=a(p,m,b,u,g[s+4],7,4118548399),u=a(u,p,m,b,g[s+5],12,1200080426),b=a(b,u,p,m,g[s+6],17,2821735955),m=a(m,b,u,p,g[s+7],22,4249261313),p=a(p,m,b,u,g[s+8],7,1770035416),u=a(u,p,m,b,g[s+9],12,2336552879),b=a(b,u,p,m,g[s+10],17,4294925233),m=a(m,b,u,p,g[s+11],22,2304563134),p=a(p,m,b,u,g[s+12],7,1804603682),u=a(u,p,m,b,g[s+13],12,4254626195),b=a(b,u,p,m,g[s+14],17,2792965006),m=a(m,b,u,p,g[s+15],22,1236535329),p=o(p,m,b,u,g[s+1],5,4129170786),u=o(u,p,m,b,g[s+6],9,3225465664),b=o(b,u,p,m,g[s+11],14,643717713),m=o(m,b,u,p,g[s+0],20,3921069994),p=o(p,m,b,u,g[s+5],5,3593408605),u=o(u,p,m,b,g[s+10],9,38016083),b=o(b,u,p,m,g[s+15],14,3634488961),m=o(m,b,u,p,g[s+4],20,3889429448),p=o(p,m,b,u,g[s+9],5,568446438),u=o(u,p,m,b,g[s+14],9,3275163606),b=o(b,u,p,m,g[s+3],14,4107603335),m=o(m,b,u,p,g[s+8],20,1163531501),p=o(p,m,b,u,g[s+13],5,2850285829),u=o(u,p,m,b,g[s+2],9,4243563512),b=o(b,u,p,m,g[s+7],14,1735328473),m=o(m,b,u,p,g[s+12],20,2368359562),p=n(p,m,b,u,g[s+5],4,4294588738),u=n(u,p,m,b,g[s+8],11,2272392833),b=n(b,u,p,m,g[s+11],16,1839030562),m=n(m,b,u,p,g[s+14],23,4259657740),p=n(p,m,b,u,g[s+1],4,2763975236),u=n(u,p,m,b,g[s+4],11,1272893353),b=n(b,u,p,m,g[s+7],16,4139469664),m=n(m,b,u,p,g[s+10],23,3200236656),p=n(p,m,b,u,g[s+13],4,681279174),u=n(u,p,m,b,g[s+0],11,3936430074),b=n(b,u,p,m,g[s+3],16,3572445317),m=n(m,b,u,p,g[s+6],23,76029189),p=n(p,m,b,u,g[s+9],4,3654602809),u=n(u,p,m,b,g[s+12],11,3873151461),b=n(b,u,p,m,g[s+15],16,530742520),m=n(m,b,u,p,g[s+2],23,3299628645),p=r(p,m,b,u,g[s+0],6,4096336452),u=r(u,p,m,b,g[s+7],10,1126891415),b=r(b,u,p,m,g[s+14],15,2878612391),m=r(m,b,u,p,g[s+5],21,4237533241),p=r(p,m,b,u,g[s+12],6,1700485571),u=r(u,p,m,b,g[s+3],10,2399980690),b=r(b,u,p,m,g[s+10],15,4293915773),m=r(m,b,u,p,g[s+1],21,2240044497),p=r(p,m,b,u,g[s+8],6,1873313359),u=r(u,p,m,b,g[s+15],10,4264355552),b=r(b,u,p,m,g[s+6],15,2734768916),m=r(m,b,u,p,g[s+13],21,1309151649),p=r(p,m,b,u,g[s+4],6,4149444226),u=r(u,p,m,b,g[s+11],10,3174756917),b=r(b,u,p,m,g[s+2],15,718787259),m=r(m,b,u,p,g[s+9],21,3951481745),p=i(p,c),m=i(m,h),b=i(b,l),u=i(u,f);return(d(p)+d(m)+d(b)+d(u)).toLowerCase()}const c=class{constructor(i){t(this,i),this.submitEvent=e(this,"dwc-login-submit",7),this.cancelEvent=e(this,"dwc-login-cancel",7),this.autoClose=!0,this.autoSignin=!1,this.disabled=!1,this.emptyPassword=!1,this.error=!1,this.i18n={title:"Authentication",usernamePrompt:"Username",passwordPrompt:"Password",rememberMe:"Remember me",loginButton:"Sign in",cancelButton:"Cancel",error:{title:"Incorrect username or password",message:"Check that you have entered the correct username and password and try again."}},this.maxWidth="400px",this.maxHeight="",this.opened=!1,this.password=void 0,this.passwordMediation="optional",this.rememberme=!0,this.username=void 0}onOpenedChanged(t){t&&this.loadState()}connectedCallback(){this.handleSigninClicked=this.handleSigninClicked.bind(this),this.handleCancelClicked=this.handleCancelClicked.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleUsernameChanged=this.handleUsernameChanged.bind(this),this.handlePasswordChanged=this.handlePasswordChanged.bind(this),this.handleRemembermeChanged=this.handleRemembermeChanged.bind(this),this.handleDialogKeydown=this.handleDialogKeydown.bind(this),this.handleDialogOpened=this.handleDialogOpened.bind(this)}componentWillLoad(){this.loadState()}componentDidLoad(){null!=window.applyFocusVisiblePolyfill&&window.applyFocusVisiblePolyfill(this.el.shadowRoot);const t=[r.KEY,r.REQUEST];this.$usernameInput.highlightBehaviors=t,this.$passwordInput.highlightBehaviors=t}submit(){var t,e;if(this.disabled)return;const i=this.validateUsername(),a=this.validatePassword();i&&a?(this.saveState(),this.tryClosing(),this.submitEvent.emit({username:null===(t=this.$usernameInput)||void 0===t?void 0:t.value,password:null===(e=this.$passwordInput)||void 0===e?void 0:e.value,rememberme:this.rememberme})):i?a||this.$passwordInput.setFocus():this.$usernameInput.setFocus()}handleFormSubmit(t){return t.preventDefault(),this.submit(),!1}handleDialogOpened(){i((()=>{this.$usernameInput.setFocus()}))}handleSigninClicked(){this.$submitButton.click()}handleCancelClicked(){this.tryClosing(),this.cancelEvent.emit()}tryClosing(){this.opened=!this.autoClose&&this.opened,this.opened&&(this.disabled=!0)}handleUsernameChanged(){this.validateUsername()}handlePasswordChanged(){this.validatePassword()}handleRemembermeChanged(t){this.rememberme=t.target.checked}handleDialogKeydown(t){if("Enter"===t.key){const e=t.target;if("dwc-button"===e.tagName.toLowerCase()&&e.label===this.i18n.cancelButton)return;this.submit()}}validateUsername(){var t,e;return(null===(e=null===(t=this.$usernameInput)||void 0===t?void 0:t.value)||void 0===e?void 0:e.length)?(this.$usernameInput.invalid=!1,!0):(this.$usernameInput.invalid=!0,!1)}validatePassword(){var t,e;let i=(null===(e=null===(t=this.$passwordInput)||void 0===t?void 0:t.value)||void 0===e?void 0:e.length)>0;return i||(i=this.emptyPassword,i)?(this.$passwordInput.invalid=!1,!0):(this.$passwordInput.invalid=!0,!1)}saveState(){var t,e,i,a,o,n,r;if(window.PasswordCredential&&(null===(e=null===(t=this.$passwordInput)||void 0===t?void 0:t.value)||void 0===e?void 0:e.length)){const t=new window.PasswordCredential({id:null===(i=this.$usernameInput)||void 0===i?void 0:i.value,password:null===(a=this.$passwordInput)||void 0===a?void 0:a.value,name:null===(o=this.$usernameInput)||void 0===o?void 0:o.value,iconURL:`https://www.gravatar.com/avatar/${s(null===(n=this.$usernameInput)||void 0===n?void 0:n.value)}?d=robohash`});navigator.credentials.store(t)}const d=this.rememberme?"on":"off";localStorage.setItem("dwc-login-rememberme",d),"on"===d?localStorage.setItem("dwc-login-username",null===(r=this.$usernameInput)||void 0===r?void 0:r.value):localStorage.removeItem("dwc-login-username")}loadState(){let t=Promise.resolve();window.PasswordCredential&&(t=navigator.credentials.get({password:!0,mediation:this.passwordMediation}).then((t=>(t&&(this.$usernameInput.value=t.name,this.$passwordInput.value=t.password,this.autoSignin&&this.submit()),t)))),t.then((t=>{const e=localStorage.getItem("dwc-login-rememberme");if(this.rememberme="on"===e||"off"!==e&&this.rememberme,!t&&"on"===e){const t=localStorage.getItem("dwc-login-username");t&&(this.username=t)}}))}render(){var t,e,i,n;return a(o,{key:"d4fcb2005d20991825418db179905bdbc2d50f8f","data-no-header":!this.i18n.title,"data-no-footer":!this.i18n.rememberMe&&!this.i18n.loginButton&&!this.i18n.cancelButton,"data-no-cancel-button":!this.i18n.cancelButton,class:d({BBjUserAuthentication:!0})},a("dwc-dialog",{key:"361175a1119b5b83397b1d159f48ad27a42d2a59",part:"dialog",cancelOnEscKey:!1,cancelOnOutsideClick:!1,opened:this.opened,maxWidth:this.maxWidth,maxHeight:this.maxHeight,onKeyDown:this.handleDialogKeydown,"onDwc-dialog-opened":this.handleDialogOpened,moveable:!1,theme:"primary",exportparts:"modal: dialog-modal, dialog: dialog-content",autofocus:!0},a("header",{key:"66bdc44b4d93e019869a5abed3a45bf9cb738d54",slot:"header",part:"header"},a("slot",{key:"a3d2cea0942f9fb921b49476585aa97e01bbdf05",name:"before-header"}),this.i18n.title,a("slot",{key:"82aa42213e4564d9523956c293765e1abe1377f0",name:"after-header"})),a("section",{key:"249664bb63e3e468aa3271e509e10d347bc0f715",slot:"content",part:"content"},a("slot",{key:"2b020dbfec23c98d2df7c0496dc0196b1c5fcb04",name:"before-content"}),a("form",{key:"bc44238fc53ceee205096fe83b3cbd0effe00d2c",part:"form",onSubmit:this.handleFormSubmit,autocomplete:"on",method:"post"},a("dwc-alert",{key:"c05506b7726273578b1407a98d26df363698b485",part:"error",opened:this.error,theme:"danger",icon:"dwc:info"},a("div",{key:"f27d41e715b8c11dc811f2aaec774e17a5544554",part:"error-content"},a("dwc-icon",{key:"e9e0947fac422d227dd8686579fd168ddb3ff0d9",part:"error-icon",pool:"dwc",name:"info","aria-hidden":"true"}),a("div",{key:"020372e0e5cdcad78085d58bbbc89ec2a87b47de",part:"error-message"},a("strong",{key:"37ec731d95d19ef894f1dcceed3bccde55ad7b13",part:"error-title",innerHTML:null===(e=null===(t=this.i18n)||void 0===t?void 0:t.error)||void 0===e?void 0:e.title}),a("div",{key:"fa6e6d1ff2e365f9c0d232b71e9dc42c50a54c8d",part:"error-description",innerHTML:null===(n=null===(i=this.i18n)||void 0===i?void 0:i.error)||void 0===n?void 0:n.message})))),a("slot",{key:"11ef8e96ace8fb5d8964af4f6c1c125b2a12f430",name:"before-form"}),a("dwc-field",{key:"cd70f7b8bc46b2f89f7e87c9f01007f890b8f311",ref:t=>this.$usernameInput=t,part:"username-input",id:"username",name:"username",autocomplete:"username",value:this.username,label:this.i18n.usernamePrompt,required:!0,autoValidate:!1,onInput:this.handleUsernameChanged}),a("dwc-field",{key:"e457f474d091c249f9b228f3aecced361ac66d6d",ref:t=>this.$passwordInput=t,part:"password-input",id:"password",type:"password",name:"password",autocomplete:"current-password",value:this.password,label:this.i18n.passwordPrompt,required:!this.emptyPassword,autoValidate:!1,onInput:this.handlePasswordChanged}),a("slot",{key:"50cda1118d0b1cfe829c85638cfe205e7cbbee64",name:"after-form"}),a("button",{key:"b6734aed32d627b2c9e4deed88df3557941e6fe1",ref:t=>this.$submitButton=t,hidden:!0})),a("footer",{key:"5228523663b88dedfa346ed2ec05e99654c5e186",part:"footer"},a("slot",{key:"bf0a20d7f8e0f8a2d7f32640644beb809e46c8bb",name:"before-footer"}),a("dwc-checkbox",{key:"73a45e002dbcc7f3427fe4f6182b0cf8fe85eb57",part:"rememberme-input",checked:this.rememberme,label:this.i18n.rememberMe,hidden:!this.i18n.rememberMe,"onDwc-changed":this.handleRemembermeChanged}),a("div",{key:"1cc9421109a45349fbe508edd11ee86ff2755a08",part:"buttons"},a("dwc-button",{key:"fc14eff4b840584089c9d486280fae1de47e09e9",part:"submit-button",theme:"primary",label:this.i18n.loginButton,hidden:!this.i18n.loginButton,disabled:this.disabled,onClick:this.handleSigninClicked}),a("dwc-button",{key:"4b6fb9432e6567ba27632350b29f05f70f5e7280",part:"cancel-button",label:this.i18n.cancelButton,hidden:!this.i18n.cancelButton,disabled:this.disabled,onClick:this.handleCancelClicked})),a("slot",{key:"de2e0c9f244e89ba8efe8d5a2f714698e2092c64",name:"after-footer"})),a("slot",{key:"9d219d7bd4262b871dded682312e61c3d4d2130d",name:"after-content"}))))}get el(){return n(this)}static get watchers(){return{opened:["onOpenedChanged"]}}};c.style="@media (prefers-reduced-motion: reduce){*,::before,::after{animation-delay:-1ms !important;animation-duration:1ms !important;animation-iteration-count:1 !important;background-attachment:initial !important;scroll-behavior:auto !important;transition-delay:0s !important;transition-duration:0s !important}}:host{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:relative;-webkit-tap-highlight-color:transparent;text-size-adjust:100%}:host *,:host *::before,:host *::after{box-sizing:inherit}:host{--dwc-dialog-modal-background:var(--dwc-surface-1);--dwc-dialog-padding:0;display:block}[hidden]{display:none !important}[part=dialog]{--dwc-dialog-scroll-bottom-shadow:none}[part=header],[part=form],[part=footer]{padding:var(--dwc-space-m)}[part=header]{font-weight:var(--dwc-font-weight-semibold);text-align:center}:host([data-no-header]) [part=header],:host([data-no-footer]) [part=footer]{display:none}:host([data-no-footer]) [part=content]{padding-bottom:var(--dwc-space-m)}[part=content]{display:flex;flex-direction:column;gap:var(--dwc-space-m)}[part=form]{display:flex;flex-direction:column;gap:var(--dwc-space-m)}[part=username-input],[part=password-input]{display:block;width:100%}[part=footer]{align-items:center;background-color:var(--dwc-surface-1);display:flex;flex-wrap:wrap;gap:var(--dwc-space-m);justify-content:center;width:100%}[part=buttons]{align-items:center;display:flex;flex-wrap:wrap}[part=rememberme-input]{flex:1;margin-right:var(--dwc-space-l)}[part=signin-button],[part=cancel-button]{margin:0 var(--dwc-space-xs)}:host([data-no-cancel-button]) [part=signin-button]{margin-right:0}[part=error-content]{display:flex;gap:var(--dwc-space-s)}[part=error-icon]{color:var(--dwc-color-danger);min-width:var(--dwc-size-xs)}[part=error-title]{font-weight:var(--dwc-font-weight-bold)}[part=error-description]{margin:var(--dwc-space) 0}@media screen and (max-width: 450px){[part=content]{padding-bottom:0}[part=footer]{align-items:center;background-color:unset;flex-direction:column;justify-content:center;padding-top:0}[part=buttons]{align-items:flex-end}[part=rememberme-input]{align-self:flex-start;margin-bottom:var(--dwc-space-m)}}";export{c as dwc_login}