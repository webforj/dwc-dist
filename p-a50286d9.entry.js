/*!
 * Built by BASIS
 * Copyright BASIS International Ltd.
 */
import{h as e,F as t,r as i,c as n,d as l,w as r,H as s,g as o}from"./p-00e3df8e.js";import{g as a,t as c}from"./p-dc076e70.js";import{w as h}from"./p-89a330bf.js";import{D as d,A as u}from"./p-5440a118.js";import{g as b}from"./p-22ab23bc.js";import{b as p,_ as f,t as w,c as g}from"./p-ece60743.js";import{s as m,h as v,C as x,g as k,y,l as _,a as C,D as S,k as j}from"./p-58156e74.js";import"./p-5119ef20.js";const H=new Map,R=new d("<dwc-table> Value Getter Expression",["data","table"]),D=new d("<dwc-table> Header Renderer Expression",["column","table"]),O=(e,t=10)=>{L(e);let i=[];const n=e.columnDefinitions.length-1,l=[],r=[],s=[];return e.columnDefinitions.forEach(((o,a)=>{const c=Object.assign(Object.assign({id:o.id||String(a),key:o.id||String(a),align:o.align||"left",label:o.label||o.id,hidden:o.hidden||!1,sortable:o.sortable||!1,sort:o.sort||"none",suppressNavigable:o.suppressNavigable||!1,valueGetter:o.valueGetter||null,cellRenderer:o.cellRenderer||null,headerRenderer:o.headerRenderer||null,minWidth:o.minWidth||null,type:o.type||"text",pinned:o.pinned||"auto"},o),{originalIndex:a,first:0===a,last:a===n,getValue:function(t){return Object.hasOwn(o,"valueGetter")&&null!==o.valueGetter?R.evaluate(this.valueGetter,{data:t,table:e}):b(t,o.id)}});Object.defineProperty(c,"renderedLabel",{get:function(){return this.headerRenderer&&null!==this.headerRenderer?D.evaluate(this.headerRenderer,{column:c,table:e}):this.label},enumerable:!0,configurable:!1}),Object.defineProperty(c,"estimatedWidth",{get:function(){const i=E(e).estimatedWidths;if(i.has(o.id))return i.get(o.id);const n=this.sortable?10:0,l=e.data.map((e=>(String(this.getValue(e)).replace(/<[^>]*>?/gm,"")||"").length+n)),r=2*String(this.renderedLabel).length,s=Math.max(...l,r),a=Math.max(s*t,this.minWidth||100);return i.set(o.id,a),a},enumerable:!0,configurable:!1}),"left"===c.pinned?l.push(c):"right"===c.pinned?r.push(c):s.push(c),E(e).columns.set(c.id,c),i.push(c)})),i=[...l,...s,...r],i.forEach(((e,t)=>{e.index=t})),i},$=(e,t)=>E(e).columns.get(t),M=(e,t,i=!1)=>{let n={position:null,left:null,right:null,zIndex:null};if("left"===t.pinned){const l=E(e).leftPinnedColumnsOffsetCache;if(!l.has(t.id)){let i=0;E(e).columns.forEach((e=>{"left"===e.pinned&&e.originalIndex<t.originalIndex&&(i+=e.minWidth||e.estimatedWidth)})),l.set(t.id,i)}n=Object.assign(Object.assign({},n),{position:"sticky",left:`calc(var(--_cell-checkbox-width) + ${l.get(t.id)}px)`,zIndex:t.originalIndex+2+(i?1:0)})}else if("right"===t.pinned){const l=E(e).rightPinnedColumnsOffsetCache;if(!l.has(t.id)){let i=0,n=-1;const r=Array.from(E(e).columns.values());r.forEach(((e,i)=>{e.id===t.id&&(n=i)}));for(let e=n+1;e<r.length;e++){const t=r[e];"right"===t.pinned&&(i+=t.minWidth||t.estimatedWidth)}l.set(t.id,i)}const r=E(e).columns.size;n=Object.assign(Object.assign({},n),{position:"sticky",right:`${l.get(t.id)}px`,zIndex:r-t.originalIndex+2+(i?1:0)})}return n},E=e=>(H.has(e)||H.set(e,{columns:new Map,estimatedWidths:new Map,leftPinnedColumnsOffsetCache:new Map,rightPinnedColumnsOffsetCache:new Map}),H.get(e)),L=e=>{const{columns:t,estimatedWidths:i,leftPinnedColumnsOffsetCache:n,rightPinnedColumnsOffsetCache:l}=E(e);t.clear(),i.clear(),n.clear(),l.clear()},P=e=>e?{left:"0",position:"sticky",zIndex:"100"}:{},z=({isChecked:t,isIndeterminate:i,headerCheckboxSelection:n,hasLeftPinnedColumns:l,hidden:r})=>{const s=["cell","cell-header","cell-checkbox","cell-checkbox-header"];i&&s.push("cell-checkbox-indeterminate"),l&&s.push("cell-pinned-left");const o=P(l);return o.zIndex=String(Number(o.zIndex)+1),e("th",{part:s.join(" "),tabindex:"-1",style:o},e("div",{part:"cell-content cell-content-header cell-content-checkbox"},n&&e("dwc-checkbox",{part:"checkbox checkbox-header",checked:t,indeterminate:i,tabTraversable:-1,hidden:r})))},A=({table:t,column:i,key:n})=>{if(i.hidden)return null;const l=["cell","cell-header",`cell-align-${i.align}`];i.sortable&&l.push("cell-sortable"),"left"===i.pinned&&l.push("cell-pinned-left"),"right"===i.pinned&&l.push("cell-pinned-right");const r="none"!==i.sort;return e("th",{key:n,part:l.join(" "),"data-column":i.id,tabindex:"0",style:M(t,i,!0)},e("div",{part:"cell-content cell-content-header"},e("div",{part:"cell-label cell-label-header",innerHTML:i.renderedLabel}),i.sortable&&e("div",{part:"cell-sort-icons "+(r?"cell-sort-icons-active":"")},e("dwc-icon",{pool:"dwc",name:"chevron-up",hidden:"desc"===i.sort}),e("dwc-icon",{pool:"dwc",name:"chevron-down",hidden:"asc"===i.sort}))))},T=({table:t,columns:i,hasLeftPinnedColumns:n,multiSelection:l,rows:r,selected:s,checkboxSelection:o,headerCheckboxSelection:a,columnHeaders:c})=>{if(!c)return null;const h=r.filter((e=>s.includes(e.id)));return e("tr",{part:"row row-header"},o&&l&&e(z,{isChecked:h.length===r.length&&h.length>0,isIndeterminate:h.length>0&&h.length<r.length,headerCheckboxSelection:a,hasLeftPinnedColumns:n,hidden:0===i.length}),i.map((i=>e(A,{table:t,key:i.id,column:i}))))};var I,N=m,F=v,W=Object.prototype.hasOwnProperty,U=x,V=function(e){if(!N(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=F(e),i=[];for(var n in e)("constructor"!=n||!t&&W.call(e,n))&&i.push(n);return i},B=k,G=p,K=f((function(e,t,i,n){G(t,function(e){return B(e)?U(e,!0):V(e)}(t),e,n)})),Z=y,q=_,X=Object.prototype,J=X.hasOwnProperty,Q={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Y=/<%=([\s\S]+?)%>/g,ee=(I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(e){return null==I?void 0:I[e]}),te=w,ie=/[&<>"']/g,ne=RegExp(ie.source),le=K,re=C,se=function(e,t){return Z(t,(function(t){return e[t]}))},oe=function(e,t,i,n){return void 0===e||q(e,X[i])&&!J.call(n,i)?t:e},ae=function(e){return"\\"+Q[e]},ce=S,he=g,de=j,ue=Y,be={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Y,variable:"",imports:{_:{escape:function(e){return(e=te(e))&&ne.test(e)?e.replace(ie,ee):e}}}},pe=w,fe=/\b__p \+= '';/g,we=/\b(__p \+=) '' \+/g,ge=/(__e\(.*?\)|\b__t\)) \+\n'';/g,me=/[()=,{}\[\]\/\s]/,ve=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xe=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,ye=Object.prototype.hasOwnProperty;const _e=new Map,Ce=new class extends u{constructor(){super(...arguments),this.store=new Map,this.firstExecution=new Set}evaluate(e,t,i){const{throwExceptions:n=!1}=i||{};try{const i=!this.firstExecution.has(e);return i&&this.firstExecution.add(e),this.compile(e)(Object.assign(Object.assign({},t),{isFirstExecution:i}))}catch(t){if(n)throw t;{const i=this.getType();console.warn(`[${i}]: Processing of the template failed`),console.warn(`[${i}]: Template = `+e),console.warn(`[${i}]: Params:`,this.getParams()),console.warn(`[${i}]: Exception:`,t)}return null}}compile(e){if(this.store.has(e))return this.store.get(e);let t;return t="function"==typeof e?e:function(e,t,i){var n=be.imports._.templateSettings||be;i&&he(e,t,i)&&(t=void 0),e=pe(e),t=le({},t,n,oe);var l,r,s=le({},t.imports,n.imports,oe),o=de(s),a=se(s,o),c=0,h=t.interpolate||xe,d="__p += '",u=RegExp((t.escape||xe).source+"|"+h.source+"|"+(h===ue?ve:xe).source+"|"+(t.evaluate||xe).source+"|$","g"),b=ye.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(u,(function(t,i,n,s,o,a){return n||(n=s),d+=e.slice(c,a).replace(ke,ae),i&&(l=!0,d+="' +\n__e("+i+") +\n'"),o&&(r=!0,d+="';\n"+o+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=a+t.length,t})),d+="';\n";var p=ye.call(t,"variable")&&t.variable;if(p){if(me.test(p))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(r?d.replace(fe,""):d).replace(we,"$1").replace(ge,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var f=re((function(){return Function(o,b+"return "+d).apply(void 0,a)}));if(f.source=d,ce(f))throw f;return f}(e),this.store.set(e,t),t}}("<dwc-table> Cell Renderer Template Expression",["cell","table"]),Se=(e,t,i)=>{const n=je(i.id,t.id),l={id:n,key:n,index:t.originalIndex,column:t,row:i,item:i,first:t.first,last:t.last,get navigable(){return!t.suppressNavigable},get value(){return i.getValue(t.id)},get renderedValue(){return t.cellRenderer&&null!==t.cellRenderer?Ce.evaluate(t.cellRenderer,{cell:this,table:e}):null}};return Re(e).cells.set(l.id,l),l},je=(e,t)=>`${e}-${t}`,He=(e,t)=>Re(e).cells.get(t),Re=e=>(_e.has(e)||_e.set(e,{cells:new Map}),_e.get(e));var De;!function(e){e.NextHorizontal="next-horizontal",e.PreviousHorizontal="previous-horizontal",e.NextVertical="next-vertical",e.PreviousVertical="previous-vertical",e.FirstCellInTable="first-cell-in-table",e.LastCellInTable="last-cell-in-table",e.FirstCellInRow="first-cell-in-row",e.LastCellInRow="last-cell-in-row",e.FirstCellInColumn="first-cell-in-column",e.LastCellInColumn="last-cell-in-column"}(De||(De={}));const Oe=(e,t,i,n,l)=>{const r=He(e,t);switch(i){case De.NextHorizontal:return $e(r,n,l);case De.PreviousHorizontal:return Me(r,n,l);case De.NextVertical:return Ee(r,n,l);case De.PreviousVertical:return Le(r,n,l);case De.FirstCellInColumn:return Ae(r.column.index,n,l);case De.LastCellInColumn:return Te(r.column.index,n,l);case De.FirstCellInRow:return Ie(r.row.index,n,l);case De.LastCellInRow:return Ne(r.row.index,n,l);case De.FirstCellInTable:return Pe(n,l);case De.LastCellInTable:return ze(n,l);default:return null}},$e=(e,t,i)=>{if(0===t.length||0===i.length)return null;let n=e.column.index+1;const l=e.row.index;for(;n<t.length;){if(!t[n].suppressNavigable&&!t[n].hidden)return i[l].cells[n]||null;n++}return null},Me=(e,t,i)=>{if(0===t.length||0===i.length)return null;let n=e.column.index-1;const l=e.row.index;for(;n>=0;){if(!t[n].suppressNavigable&&!t[n].hidden)return i[l].cells[n]||null;n--}return null},Ee=(e,t,i)=>{if(0===t.length||0===i.length)return null;let n=e.row.index+1;const l=e.column.index;for(;n<i.length;){if(i[n].cells[l]&&!t[l].suppressNavigable&&!t[l].hidden)return i[n].cells[l]||null;n++}return null},Le=(e,t,i)=>{if(0===t.length||0===i.length)return null;let n=e.row.index-1;const l=e.column.index;for(;n>=0;){if(i[n].cells[l]&&!t[l].suppressNavigable&&!t[l].hidden)return i[n].cells[l]||null;n--}return null},Pe=(e,t)=>{if(0===t.length)return null;for(let i=0;i<e.length;i++)if(!e[i].suppressNavigable&&!e[i].hidden)return t[0].cells[i]||null;return null},ze=(e,t)=>{if(0===t.length)return null;for(let i=e.length-1;i>=0;i--)if(!e[i].suppressNavigable&&!e[i].hidden)return t[t.length-1].cells[i]||null;return null},Ae=(e,t,i)=>{if(0===i.length)return null;for(let n=0;n<i.length;n++)if(i[n].cells[e]&&!t[e].suppressNavigable&&!t[e].hidden)return i[n].cells[e]||null;return null},Te=(e,t,i)=>{if(0===i.length)return null;for(let n=i.length-1;n>=0;n--)if(i[n].cells[e]&&!t[e].suppressNavigable&&!t[e].hidden)return i[n].cells[e]||null;return null},Ie=(e,t,i)=>{if(0===i.length)return null;for(let n=0;n<t.length;n++)if(i[e].cells[n]&&!t[n].suppressNavigable&&!t[n].hidden)return i[e].cells[n]||null;return null},Ne=(e,t,i)=>{if(0===i.length)return null;for(let n=t.length-1;n>=0;n--)if(i[e].cells[n]&&!t[n].suppressNavigable&&!t[n].hidden)return i[e].cells[n]||null;return null},Fe=({hasLeftPinnedColumns:t,isSelected:i})=>{const n=["cell","cell-body","cell-checkbox","cell-checkbox-body"];return i&&n.push("cell-selected"),t&&n.push("cell-pinned-left"),e("td",{part:n.join(" "),style:P(t),tabindex:"-1"},e("div",{part:"cell-content cell-content-checkbox"},e("dwc-checkbox",{part:"checkbox",checked:i,tabTraversable:-1})))},We=({table:t,key:i,cell:n,isFirstNavigable:l})=>{const r=["cell","cell-body",`cell-align-${n.column.align}`];return n.column.hidden?null:("left"===n.column.pinned&&r.push("cell-pinned-left"),"right"===n.column.pinned&&r.push("cell-pinned-right"),e("td",{key:i,part:r.join(" "),"data-cell":n.id,tabindex:l?"0":"-1",style:M(t,n.column)},null===n.renderedValue&&e("div",{part:"cell-content"},e("div",{part:"cell-label",innerHTML:n.value})),null!==n.renderedValue&&e("div",{part:"cell-content",innerHTML:n.renderedValue})))},Ue=({table:t,key:i,firstNavigableCell:n,hasLeftPinnedColumns:l,multiSelection:r,row:s,selected:o,checkboxSelection:a})=>{const c=["row"];return o&&c.push("row-selected"),e("tr",{key:i,part:c.join(" "),"data-row":s.id},a&&r&&e(Fe,{isSelected:o,hasLeftPinnedColumns:l}),s.cells.map((i=>e(We,{table:t,key:i.id+i.column.sort,cell:i,isFirstNavigable:i.id===n.id}))))},Ve=({table:i,columns:n,hasLeftPinnedColumns:l,multiSelection:r,virtualRows:s,selected:o,checkboxSelection:a})=>{const c=Pe(n,s);return e(t,null,(s||[]).map((t=>{const n=o.includes(t.id);return e(Ue,{table:i,key:t.id,firstNavigableCell:c,hasLeftPinnedColumns:l,multiSelection:r,row:t,selected:n,checkboxSelection:a})})))},Be=({columns:t,multiSelection:i,checkboxSelection:n})=>e("colgroup",null,n&&i&&e("col",{part:"column",style:{width:"var(--_cell-checkbox-width)"}}),t.filter((e=>!e.hidden)).map((t=>e("col",{key:t.id,part:"column",style:{width:`${t.minWidth||t.estimatedWidth}px`}})))),Ge=new Map,Ke=new d("<dwc-table> Row ID Expression",["row","table"]),Ze=new d("<dwc-table> Row Selectable Expression",["row","table"]);let qe=-1;const Xe=(e,t)=>{if(Ye(e),!t.length)return[];const i=[...e.data];return i.map(((n,l)=>{const r="__AUTO__GENERATED__ID__",s="__INDEX__";void 0===n[r]&&Object.defineProperty(n,r,{value:String(++qe),enumerable:!1,writable:!1}),void 0===n[s]&&Object.defineProperty(n,s,{value:l,enumerable:!1,writable:!1});const o={index:l,even:l%2==0,odd:l%2!=0,first:0===l,last:l===i.length-1,data:n,get id(){return e.getRowId&&null!==e.getRowId?Ke.evaluate(e.getRowId,{row:o,table:e}):n[r]},get key(){return this.id},get selectable(){return!e.isRowSelectable||null===e.isRowSelectable||Ze.evaluate(e.isRowSelectable,{row:o,table:e})},get cells(){return t.map((t=>Se(e,t,o)))},getValue(t){const i=$(e,t);return i?i.getValue(o.data):""}};return Qe(e).rows.set(o.id,o),o}))},Je=(e,t)=>Qe(e).rows.get(t),Qe=e=>(Ge.has(e)||Ge.set(e,{rows:new Map}),Ge.get(e)),Ye=e=>{const{rows:t}=Qe(e);t.clear(),(e=>{const{cells:t}=Re(e);t.clear()})(e)},et=class{constructor(e){i(this,e),this.cellClickedEvent=n(this,"dwc-cell-clicked",7),this.cellDbclickedEvent=n(this,"dwc-cell-dbclicked",7),this.rowClickedEvent=n(this,"dwc-row-clicked",7),this.rowDbclickedEvent=n(this,"dwc-row-dbclicked",7),this.rowSelectedEvent=n(this,"dwc-row-selected",7),this.rowDeselectedEvent=n(this,"dwc-row-deselected",7),this.selectionChangedEvent=n(this,"dwc-selection-changed",7),this.sortChangedEvent=n(this,"dwc-sort-changed",7),this.focusChangeTriggeredByUser=!1,this.sortState={},this.bottomFillerHeight=0,this.columns=[],this.hasLeftPinnedColumns=!1,this.rows=[],this.scrollPosition=0,this.topFillerHeight=0,this.visibleRows=[],this.wrapperHeight=0,this.checkboxSelection=!0,this.clientSorting=!1,this.columnDefinitions=[],this.columnHeaders=!0,this.data=[],this.deselection=!0,this.getRowId=void 0,this.headerCheckboxSelection=!0,this.headerHeight=48,this.isRowSelectable=void 0,this.multiSelectWithClick=!1,this.overscan=35,this.rowHeight=35,this.selected=[],this.selectionMode="none"}onHeaderHeightChange(){this.el.style.setProperty("--_header-height",`${this.headerHeight}px`)}onRowHeightChange(){this.el.style.setProperty("--_row-height",`${this.rowHeight}px`)}onSelectionModeChanged(){"none"!==this.selectionMode&&"single"!==this.selectionMode||this.deselectAll(),this.el.style.setProperty("--_cell-checkbox-width",("multiple"===this.selectionMode?48:0)+"px")}onDataChange(){this.updateState()}connectedCallback(){this.handleScroll=this.handleScroll.bind(this),this.handleClick=this.handleClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}componentWillLoad(){this.onHeaderHeightChange(),this.onRowHeightChange(),this.onSelectionModeChanged(),this.updateState()}componentDidLoad(){this.elSizeObserver=new ResizeObserver((()=>{this.wrapperHeight=this.$wrapper.clientHeight,this.updateVirtualizeResult()})),this.elSizeObserver.observe(this.el)}componentDidUpdate(){l((()=>{this.$wrapper.scrollTop!==this.scrollPosition&&r((()=>this.$wrapper.scrollTop=this.scrollPosition))}))}componentWillRender(){this.saveLastActiveCell()}componentDidRender(){this.lastActiveCell&&this.focusChangeTriggeredByUser&&this.focusCell(this.lastActiveCell.row.id,this.lastActiveCell.column.id).then((()=>{this.focusChangeTriggeredByUser=!1}))}async select(e){const t=Array.isArray(e)?e:[e];"multiple"===this.selectionMode?this.selected=[...new Set([...this.selected,...t])]:"single"===this.selectionMode&&(this.selected=[t[0]])}async selectAll(){this.selected=this.rows.map((e=>e.id))}async deselect(e){const t=Array.isArray(e)?e:[e];this.selected=this.selected.filter((e=>!t.includes(e)))}async deselectAll(){this.selected=[]}async updateRow(e,t){const i=((e,t,i)=>{const n=Je(e,t);if(!n)throw new Error(`Row with id ${t} does not exist.`);return n.data=Object.assign(Object.assign({},n.data),i),Qe(e).rows.set(n.id,n),Je(e,t)})(this.el,e,t);return this.rows=(e=>{const{rows:t}=Qe(e);return[...t.values()]})(this.el),i}async scrollToRow(e){return new Promise((t=>{l((()=>{const i=Je(this.el,e);if(!i)return void t();if(this.visibleRows.some((e=>e.id===i.id)))return void t();const n=(e=>{const{index:t,itemHeight:i}=e;return t*i})({index:i.index,itemHeight:this.rowHeight});this.scrollPosition!==n&&(this.scrollPosition=n,this.updateVirtualizeResult()),h(this.el.shadowRoot,`[data-row="${e}"]`).then(t)}))}))}async focusCell(e,t,i=!0){const n=je(e,t),l=e=>this.el.shadowRoot.querySelector(`[data-cell="${e}"]`);let r=l(n);r||await this.scrollToRow(e),r=l(n),r&&(this.el.shadowRoot.querySelectorAll('[part~="cell-body"]').forEach((e=>{e.tabIndex=-1})),r.tabIndex=0,r.focus(),i&&r.scrollIntoView({block:"center",inline:"center"}),this.lastActiveCell=He(this.el,n))}updateState(){const e=O(this.el),t=Xe(this.el,e);this.columns=e,this.rows=this.clientSorting?((e,t,i)=>((e,t,i)=>{if(!i||0===i.length)return t;const n=i.map((e=>e.prop)),l=i.map((e=>e.direction));return t.sort(((t,i)=>{let r=0,s=0;for(;r<n.length&&0===s;){const o=$(e,n[r]);if(!o)return 0;const a=t.getValue(o.id),c=i.getValue(o.id),h="asc"===l[r]?1:"desc"===l[r]?-1:0;switch(o.type){case"number":case"boolean":s=h*(Number(a)-Number(c));break;case"date":s=h*(new Date(a).setHours(0,0,0,0)-new Date(c).setHours(0,0,0,0));break;case"time":{const e=new Date(`1970-01-01T${a}Z`),t=new Date(`1970-01-01T${c}Z`);s=h*(e.getTime()-t.getTime());break}case"datetime":s=h*(new Date(a).getTime()-new Date(c).getTime());break;default:s=h*String(a).localeCompare(String(c))}r++}return s}))})(this.el,i,t.map((e=>{if(Object.hasOwn(e,"sort"))return"none"===e.sort?null:{prop:e.id,direction:e.sort}})).filter(Boolean)))(0,e,t):t,this.hasLeftPinnedColumns=e.some((e=>"left"===e.pinned)),this.updateVirtualizeResult()}updateVirtualizeResult(){const{start:e,end:t,topFillerHeight:i,bottomFillerHeight:n}=(e=>{const{count:t,scrollPosition:i,itemHeight:n,containerHeight:l,overscan:r=0}=e,s=Math.ceil(l/n)+r,o=Math.max(0,Math.floor(i/n)-Math.floor(r/2)),a=Math.min(o+s,t),c=o*n;return{start:o,end:a,topFillerHeight:c,bottomFillerHeight:Math.max(0,t*n-c-(a-o)*n)}})({count:this.rows.length,scrollPosition:this.scrollPosition,itemHeight:this.rowHeight,containerHeight:this.wrapperHeight,overscan:this.overscan});this.visibleRows=this.rows.slice(e,t),this.topFillerHeight=i,this.bottomFillerHeight=n}saveLastActiveCell(){const e=c(this.el.shadowRoot.activeElement);if(e){const t=e.closest('[part~="cell"]');t&&!t.isSameNode(this.$lastActiveCell)&&(this.$lastActiveCell=t,this.lastActiveCell=He(this.el,t.dataset.cell))}}handleScroll(){l((()=>{const{scrollTop:e}=this.$wrapper;e!==this.scrollPosition&&(this.scrollPosition=e,this.updateVirtualizeResult())}))}async handleClick(e){var t,i,n;const l=e.target,r=l.closest('[part~="cell"]');if(null===r)return;const s=null===(t=r.getAttribute("part"))||void 0===t?void 0:t.includes("cell-header"),o=null===(i=r.getAttribute("part"))||void 0===i?void 0:i.includes("cell-body"),a=null===(n=r.getAttribute("part"))||void 0===n?void 0:n.includes("cell-checkbox");a&&"dwc-checkbox"===l.nodeName.toLowerCase()?s&&this.headerCheckboxSelection?this.handleHeaderCheckboxClick(l.checked):o&&this.handleBodyCheckboxClick(e,r,l.checked):(!a&&s&&this.handleHeaderClick(e,r),!a&&o&&await this.handleBodyClick(e,r))}async handleHeaderCheckboxClick(e){e?await this.selectAll():await this.deselectAll(),this.selectionChangedEvent.emit()}handleHeaderClick(e,t){const i=$(this.el,t.dataset.column);if(null!==i&&i.sortable){switch(delete this.sortState[i.id],i.sort){case"asc":this.sortState[i.id]="desc";break;case"none":this.sortState[i.id]="asc"}this.sortChangedEvent.emit(this.sortState),this.clientSorting&&(this.columnDefinitions[i.originalIndex].sort=this.sortState[i.id]||"none",this.columnDefinitions=[...this.columnDefinitions])}}handleBodyCheckboxClick(e,t,i){const n=t.closest('[part~="row"]');if(null===n)return;const l=Je(this.el,n.dataset.row);null!==l&&((2===e.detail?this.rowDbclickedEvent:this.rowClickedEvent).emit(l),i?(this.selected=[...this.selected,l.id],this.rowSelectedEvent.emit(l)):(this.selected=this.selected.filter((e=>e!=l.id)),this.rowDeselectedEvent.emit(l)),this.selectionChangedEvent.emit())}async handleBodyClick(e,t){const i=He(this.el,t.dataset.cell);if(null===i)return;this.saveLastActiveCell(),await this.focusCell(i.row.id,i.column.id,!1);const n=2===e.detail;(n?this.cellDbclickedEvent:this.cellClickedEvent).emit(i);const l=i.row;(n?this.rowDbclickedEvent:this.rowClickedEvent).emit(l),this.handleRowSelection(e,l)}handleRowSelection(e,t){const i=this.selected.includes(t.id),n=t.selectable,l=!n||"none"===this.selectionMode,r="multiple"===this.selectionMode;if(i&&!(!n||!this.deselection)&&(this.selected=this.selected.filter((e=>e!=t.id)),this.rowDeselectedEvent.emit(t),this.selectionChangedEvent.emit()),r){const n=e.key;i||l||!(this.multiSelectWithClick||!this.multiSelectWithClick&&(e.ctrlKey||e.metaKey)||n&&("Space"===n||"Enter"===n))||(this.selected=[...this.selected,t.id],this.rowSelectedEvent.emit(t),this.selectionChangedEvent.emit())}else if(!i&&!l){for(const e of this.selected){const t=Je(this.el,e);this.rowDeselectedEvent.emit(t)}this.selected=[t.id],this.rowSelectedEvent.emit(t),this.selectionChangedEvent.emit()}}async handleKeyDown(e){var t;const i=e.target.closest('[part~="cell"]');(null===(t=null==i?void 0:i.getAttribute("part"))||void 0===t?void 0:t.includes("cell-header"))&&this.handleHeaderKeyDown(e,i),await this.handleBodyKeyDown(e,i)}handleHeaderKeyDown(e,t){var i;(null===(i=t.getAttribute("part"))||void 0===i?void 0:i.includes("cell-checkbox"))||" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),t.click())}async handleBodyKeyDown(e,t){var i;const n=t||this.el.shadowRoot.activeElement.closest('[part~="cell"]');if(null===n)return;const l=null===(i=n.getAttribute("part"))||void 0===i?void 0:i.includes("cell-body"),r=He(this.el,t.dataset.cell),s=this.rows,o=this.columns,c=e.shiftKey,h=e.ctrlKey||e.metaKey;let d;switch(e.key){case" ":e.preventDefault(),this.handleRowSelection(e,r.row);break;case"Enter":e.target.isSameNode(n)&&e.preventDefault();const t=a(n,!1);if(t)try{t.focus(),null==t||t.setFocus()}catch(e){}break;case"Home":e.preventDefault(),d=Oe(this.el,r.id,De.FirstCellInTable,o,s);break;case"End":e.preventDefault(),d=Oe(this.el,r.id,De.LastCellInTable,o,s);break;case"ArrowRight":e.preventDefault(),d=Oe(this.el,r.id,h?De.LastCellInRow:De.NextHorizontal,o,s);break;case"ArrowLeft":e.preventDefault(),d=Oe(this.el,r.id,h?De.FirstCellInRow:De.PreviousHorizontal,o,s);break;case"ArrowUp":e.preventDefault(),d=Oe(this.el,r.id,h?De.FirstCellInColumn:De.PreviousVertical,o,s);break;case"ArrowDown":e.preventDefault(),d=Oe(this.el,r.id,h?De.LastCellInColumn:De.NextVertical,o,s);break;case"Tab":if(l&&(e.preventDefault(),c)){const e=this.el.shadowRoot.querySelector('[part~="cell-header"]:not([tabindex="-1"])');e&&e.focus()}}if(d){const{row:e,column:t}=d;this.focusChangeTriggeredByUser=!0,await this.focusCell(e.id,t.id)}}render(){return e(s,{key:"0a4682146b1195e919109bc759be26f10be0c581"},e("div",{key:"6971b36d4766fe39b6a744711319a9d016991a60",ref:e=>this.$wrapper=e,onScroll:this.handleScroll,onClick:this.handleClick,onKeyDown:this.handleKeyDown,part:"table-wrapper"},e("table",{key:"3123b13683181a72040ef85b8619c4026dafa3d2",part:"table"},e(Be,{key:"649b4398275c1a1cb12fe006f3caa2e2af27d19b",columns:this.columns,multiSelection:"multiple"===this.selectionMode,checkboxSelection:this.checkboxSelection}),e("thead",{key:"a285eaa74be7442adf8c9d03552a82a04f7f2a3f",part:"header"},e(T,{key:"0218a9c2e3d80573e370ccbf742de19e8414795a",table:this.el,columns:this.columns,hasLeftPinnedColumns:this.hasLeftPinnedColumns,multiSelection:"multiple"===this.selectionMode,rows:this.rows,selected:this.selected,checkboxSelection:this.checkboxSelection,headerCheckboxSelection:this.headerCheckboxSelection,columnHeaders:this.columnHeaders,virtualRows:this.visibleRows})),e("tbody",{key:"45394dcb35e0e7742848f2cfde155484d1396f8f",part:"body"},e("tr",{key:"4b8b36a8d2bf80602f5348fc068ffa7f7e02c93d",style:{height:`${this.topFillerHeight}px`}}),e(Ve,{key:"daeb72253276ecead5d5f11079f063cd6d0134f9",table:this.el,columns:this.columns,hasLeftPinnedColumns:this.hasLeftPinnedColumns,multiSelection:"multiple"===this.selectionMode,rows:this.rows,selected:this.selected,checkboxSelection:this.checkboxSelection,virtualRows:this.visibleRows}),e("tr",{key:"116f993300f7d1cdcaab0b95954fcd64955f0822",style:{height:`${this.bottomFillerHeight}px`}})))))}get el(){return o(this)}static get watchers(){return{headerHeight:["onHeaderHeightChange"],rowHeight:["onRowHeightChange"],selectionMode:["onSelectionModeChanged"],columnDefinitions:["onDataChange"],data:["onDataChange"],getRowId:["onDataChange"],isRowSelectable:["onDataChange"]}}};et.style='@media (prefers-reduced-motion: reduce){*,::before,::after{animation-delay:-1ms !important;animation-duration:1ms !important;animation-iteration-count:1 !important;background-attachment:initial !important;scroll-behavior:auto !important;transition-delay:0s !important;transition-duration:0s !important}}:host{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:relative;-webkit-tap-highlight-color:transparent;text-size-adjust:100%}:host *,:host *::before,:host *::after{box-sizing:inherit}:host{--_row-height:30px;--_header-height:48px;--_cell-checkbox-width:48px;contain:strict;display:block;height:100%;max-height:100vh;max-width:100vw;width:100%}[hidden]{display:none}[part~=table-wrapper]{background-color:var(--dwc-surface-3);border:thin solid var(--dwc-color-default);border-radius:var(--dwc-border-radius);height:inherit;margin:0 auto;max-height:inherit;max-width:inherit;overflow-x:auto;position:relative;width:inherit}[part~=table]{border-collapse:collapse;table-layout:fixed;text-align:left;width:100%}[part~=row],[part~=cell]{background-color:var(--dwc-surface-3);box-sizing:border-box;cursor:default;height:var(--_row-height);margin:0;max-height:var(--_row-height);min-height:var(--_row-height);padding:0;user-select:none}[part~=row]{contain:strict;contain-intrinsic-height:auto var(--_row-height);content-visibility:auto}[part~=cell]{border:0;overflow:hidden;position:relative;text-overflow:ellipsis;white-space:nowrap}[part~=cell]:focus{outline:0}[part~=cell]::before,[part~=cell]::after{content:"";height:inherit;left:0;pointer-events:none;position:absolute;top:0;width:100%}[part~=cell]::before{border-radius:var(--dwc-border-radius)}[part~=cell-body]:focus::before,[part~=cell-header]:focus-visible::before{border:1px solid var(--dwc-color-primary);z-index:1}[part~=cell]::after{border-bottom:thin solid var(--dwc-color-default)}[part~=cell-pinned-left]::after{border-right:thin solid var(--dwc-color-default)}[part~=cell-pinned-right]::after{border-left:thin solid var(--dwc-color-default)}[part~=cell-checkbox]{max-width:var(--_cell-checkbox-width);min-width:var(--_cell-checkbox-width);width:var(--_cell-checkbox-width)}[part~=checkbox]{--dwc-checkbox-padding:0;margin:0;padding:0}[part~=checkbox]::part(label){display:none}[part~=cell-content]{align-items:center;box-sizing:border-box;display:inline-flex;height:inherit;overflow:hidden;padding:var(--dwc-space-s);width:100%}[part~=cell-align-left] [part~=cell-content]{justify-content:flex-start}[part~=cell-align-center] [part~=cell-content]{justify-content:center}[part~=cell-align-right] [part~=cell-content]{justify-content:flex-end}[part~=cell-label]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}[part~=cell-align-left] [part~=cell-label]{text-align:left}[part~=cell-align-center] [part~=cell-label]{text-align:center}[part~=cell-align-right] [part~=cell-label]{text-align:right}[part~=cell-header]{background-color:var(--dwc-surface-3);color:var(--dwc-color-body-text);height:var(--_header-height);max-height:var(--_header-height);min-height:var(--_header-height);position:sticky;top:0;-webkit-user-select:none;user-select:none;z-index:2}[part~=cell-content-header]{align-items:center;display:flex;width:100%}[part~=cell-content-checkbox]{align-items:center;display:flex;justify-content:center;width:100%}[part~=cell-label-header]{flex:1}[part~=cell-sortable]{cursor:var(--dwc-cursor-click)}[part~=cell-sort-icons]{--dwc-icon-size:0.9em;align-items:stretch;box-sizing:border-box;display:flex;flex-direction:column;height:100%;justify-content:center;padding-left:var(--dwc-space-s)}[part~=cell-sort-icons-active]{color:var(--dwc-color-primary-text)}[part~=row]:not([part~=row-header]):hover [part~=cell]{background-color:var(--dwc-color-primary-90);color:var(--dwc-color-on-primary-text-90)}[part~=row-selected] [part~=cell]{background-color:var(--dwc-color-primary-alt);color:var(--dwc-color-on-primary-text-alt)}';export{et as dwc_table}