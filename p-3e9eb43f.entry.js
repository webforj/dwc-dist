/*!
 * Built by BASIS
 * Copyright BASIS International Ltd.
 */
import{r as t,h as e,H as i,g as a}from"./p-00e3df8e.js";import{l as o}from"./p-f5397639.js";import{D as s}from"./p-a2384989.js";import{d as r}from"./p-89a330bf.js";import{h as n}from"./p-3e9fe89f.js";import"./p-21e654a9.js";import"./p-58156e74.js";import"./p-5119ef20.js";import"./p-ece60743.js";const h=class{constructor(e){t(this,e),this.ticking=!1,this.canScrollLeft=!1,this.canScrollRight=!1,this.disabled=void 0,this.distance=4,this.hasFocus=!1,this.hideChevronIcon=!0,this.hideHotkeyLabel=!0,this.label="",this.placement="bottom",this.scrollValue=150,this.skidding=0}onDisabledChanged(t){this.controller&&this.controller.updateItemsProperties({disabled:t})}onDistanceChanged(t){this.controller&&this.controller.updateItemsProperties({distance:t})}onHideChevronIconChanged(t){this.controller&&this.controller.updateItemsProperties({hideChevronIcon:t})}onHideAccelerator(t){this.controller&&this.controller.updateItemsProperties({hideHotkeyLabel:t})}onPlacementChanged(t){this.controller&&this.controller.updateItemsProperties({placement:t})}onSkiddingChanged(t){this.controller&&this.controller.updateItemsProperties({skidding:t})}connectedCallback(){this.handleSlotChange=this.handleSlotChange.bind(this),this.handleScroll=this.handleScroll.bind(this),this.handleScrollLeft=this.handleScrollLeft.bind(this),this.handleScrollRight=this.handleScrollRight.bind(this)}componentDidLoad(){this.controller=new s(this.el),this.handleSlotChange(),this.resizeObserver=new ResizeObserver(this.handleScroll),this.resizeObserver.observe(this.el)}async handleDocumentClick(t){const e=t.target;if(this.el.contains(e))return;if("dwc-menu"===e.nodeName.toLocaleLowerCase())return;if(!this.controller)return;const i=this.controller.getMenuItems();for(const t of i){const i=t;if(await i.hasItem(e))return}this.close()}handleWindowResize(){this.updateOverflow()}handleItemFocused(){this.hasFocus=!0}handleItemBlurred(){this.hasFocus=!1}handleItemOpened(t){if(this.disabled||t.defaultPrevented)return;const e=t.target;"dwc-menuitem"===e.nodeName.toLowerCase()&&this.controller.closeDropdownsBut(e)}handleItemEnter(t){if(this.disabled||!this.hasFocus||t.defaultPrevented)return;const e=t.target;"dwc-menuitem"===e.nodeName.toLowerCase()&&(this.controller.closeDropdownsBut(e),e.open(),this.controller.focusItem(e))}async handleItemClicked(t){if(this.disabled||t.defaultPrevented)return;const e=t.detail.item,i=t.detail.originalEvent;if("keydown"===i.type&&"Enter"===i.key)if(this.el.contains(e))await e.setFocus();else{const t=e=>{const i=e.closest("dwc-menu");if(i){const e=i.forDwcMenuItem;return t(e)||e}},i=t(e);i&&await i.setFocus()}t.defaultPrevented||this.el.contains(e)||e.hasAttribute("dropdown")||this.close()}async handleKeydown(t){if(this.disabled||t.defaultPrevented)return;const e=document.activeElement;switch(t.key){case"ArrowRight":e&&this.el.contains(e)&&(await e.close(),await this.controller.focusNextItem(e)&&t.preventDefault());break;case"ArrowLeft":e&&this.el.contains(e)&&(await e.close(),await this.controller.focusPreviousItem(e)&&t.preventDefault());break;case"ArrowDown":e.dropdown&&(await e.open(),await e.focusMenu());break;case"Escape":{if(!this.el.contains(e))break;e.dropdown&&(await e.close(),await this.controller.focusItem(e));const t=e.closest("dwc-menu");if(t){const e=t.forDwcMenuItem;e&&(await e.close(),await e.setFocus())}break}case"Enter":e.dropdown&&this.el.contains(e)&&(t.preventDefault(),e.opened?await e.focusMenu():await this.controller.focusItem(e));break;case"Home":case"End":if(e&&this.el.contains(e)){let i="Home"===t.key?this.el.firstElementChild:this.el.lastElementChild;(null==i?void 0:i.hasAttribute("disabled"))&&(i="Home"===t.key?this.controller.getNextItem(i):this.controller.getPreviousItem(i)),i&&(t.preventDefault(),await e.close(),await this.controller.focusItem(i))}}}async setFocus(){this.controller&&await this.controller.setFocus()}async removeFocus(){this.controller&&await this.controller.removeFocus()}async close(){this.controller&&this.controller.close()}updateOverflow(){const t=r(this.$itemsEl,this.$itemsWrapperEl,"horizontal");this.canScrollLeft=["both-horizontal","left"].includes(t),this.canScrollRight=["both-horizontal","right"].includes(t),this.$itemsWrapperEl.setAttribute("data-overflowing",t)}handleScroll(){this.ticking||requestAnimationFrame((()=>{this.updateOverflow(),this.ticking=!1})),this.ticking=!0}handleScrollLeft(){let t=this.$itemsWrapperEl.scrollLeft;t-=this.scrollValue,this.$itemsWrapperEl.scrollTo({left:t,behavior:"smooth"}),this.handleScroll()}handleScrollRight(){let t=this.$itemsWrapperEl.scrollLeft;t+=this.scrollValue,this.$itemsWrapperEl.scrollTo({left:t,behavior:"smooth"}),this.handleScroll()}handleSlotChange(){this.controller&&(this.handleScroll(),this.controller.resetTabTraversable(),this.controller.markFirstFocusableItem(),this.controller.updateItemsProperties({disabled:this.disabled,placement:this.placement,hideChevronIcon:this.hideChevronIcon,distance:this.distance,skidding:this.skidding,hideHotkeyLabel:this.hideHotkeyLabel,forDwcMenuBar:this.el}))}render(){return e(i,{key:"cfdace8935b351f1cbc8a3d3ddacb365eaf05635",class:n({BBjControl:!0,BBjMenuBar:!0,"bbj-disabled":this.disabled})},e("div",{key:"0524c755d56e3a03a5967dd05e8dedd9eff2f732",part:"control",class:{control:!0}},e("div",{key:"feee328d195b53fac4ea63c3c068160041ce1cf8",role:"menubar",part:"items-wrapper",ref:t=>this.$itemsWrapperEl=t,"aria-label":this.label,onScroll:this.handleScroll},e("div",{key:"de4bd8c7fd41530377a07ab4f182b27a8401080a",part:"items",ref:t=>this.$itemsEl=t},e("slot",{key:"89334c0f04332f80279244b63bfbfdc971eaeaaa",onSlotchange:this.handleSlotChange}))),e("dwc-icon-button",{key:"7b49cf7e293316035cf277a96b460353e011de13",part:"advancer advancer-left",pool:"dwc",name:"chevron-left",label:"Scroll left",tabTraversable:this.canScrollLeft?0:-1,onClick:this.handleScrollLeft}),e("dwc-icon-button",{key:"9c24c3c0deeb08c3454ca45e45e2e755e973f77b",part:"advancer advancer-right",pool:"dwc",name:"chevron-right",label:"Scroll right",tabTraversable:this.canScrollRight?0:-1,onClick:this.handleScrollRight})))}get el(){return a(this)}static get watchers(){return{disabled:["onDisabledChanged"],distance:["onDistanceChanged"],hideChevronIcon:["onHideChevronIconChanged"],hideHotkeyLabel:["onHideAccelerator"],placement:["onPlacementChanged"],skidding:["onSkiddingChanged"]}}};(function(t,e,i,a){var o,s=arguments.length,r=s<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,a);else for(var n=t.length-1;n>=0;n--)(o=t[n])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);s>3&&r&&Object.defineProperty(e,i,r)})([o.debounce(25)],h.prototype,"updateOverflow",null),h.style="@media (prefers-reduced-motion: reduce){*,::before,::after{animation-delay:-1ms !important;animation-duration:1ms !important;animation-iteration-count:1 !important;background-attachment:initial !important;scroll-behavior:auto !important;transition-delay:0s !important;transition-duration:0s !important}}:host{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:relative;-webkit-tap-highlight-color:transparent;text-size-adjust:100%}:host *,:host *::before,:host *::after{box-sizing:inherit}:host{--dwc-menubar-advancer-color:var(--dwc-color-primary-text);background-color:var(--dwc-surface-3);display:block;height:auto;width:100%;z-index:1}[part=control]{height:100%;position:relative;width:100%}[part=items-wrapper]{display:flex;height:100%;-webkit-overflow-scrolling:touch;overflow-x:auto;overflow-y:hidden;position:relative;scrollbar-width:none;scrollbar-width:none;white-space:nowrap}[part=items-wrapper]::-webkit-scrollbar{display:none}[part=items]{align-items:stretch;display:inline-flex;height:100%;justify-content:center;margin:0;padding:0}[part~=advancer]{bottom:0;color:var(--dwc-menubar-advancer-color);opacity:0;pointer-events:none;position:absolute;top:0;transition:opacity var(--dwc-transition)}[part~=advancer-left]{background:var(--dwc-menubar-left-advancer-background, linear-gradient(to right, var(--dwc-advancer-gradient)));left:0}[data-overflowing=both-horizontal]~[part~=advancer-left],[data-overflowing=left]~[part~=advancer-left]{cursor:var(--dwc-cursor-click);opacity:1;pointer-events:initial}[part~=advancer-right]{background:var(--dwc-menubar-right-advancer-background, linear-gradient(to left, var(--dwc-advancer-gradient)));right:0}[data-overflowing=both-horizontal]~[part~=advancer-right],[data-overflowing=right]~[part~=advancer-right]{cursor:var(--dwc-cursor-click);opacity:1;pointer-events:initial}";export{h as dwc_menubar}